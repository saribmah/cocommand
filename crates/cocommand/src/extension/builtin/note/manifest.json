{
  "id": "notes",
  "name": "Notes",
  "description": "Create and manage markdown notes in the workspace",
  "routing": {
    "keywords": ["notes", "markdown", "workspace", "search"]
  },
  "tools": [
    {
      "id": "create-note",
      "name": "Create Note",
      "description": "Create a note in the workspace notes directory. Default format is markdown.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "content": { "type": "string" },
          "folder": { "type": "string", "description": "Optional nested folder under notes/, using forward slashes." }
        },
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "preview": { "type": "string" },
          "content": { "type": "string" },
          "path": { "type": "string" },
          "modifiedAt": { "type": "integer" },
          "size": { "type": "integer" }
        },
        "required": ["id", "title", "preview", "content", "path"],
        "additionalProperties": false
      }
    },
    {
      "id": "list-notes",
      "name": "List Notes",
      "description": "List notes sorted by last modified time.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {
          "limit": { "type": "integer", "minimum": 1, "maximum": 500, "default": 50 }
        },
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "root": { "type": "string" },
          "notes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "preview": { "type": "string" },
                "path": { "type": "string" },
                "modifiedAt": { "type": "integer" },
                "size": { "type": "integer" }
              },
              "required": ["id", "title", "preview", "path"],
              "additionalProperties": false
            }
          },
          "count": { "type": "integer" },
          "truncated": { "type": "boolean" },
          "errors": { "type": "integer" }
        },
        "required": ["root", "notes", "count", "truncated", "errors"],
        "additionalProperties": false
      }
    },
    {
      "id": "read-note",
      "name": "Read Note",
      "description": "Read a note by id.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" }
        },
        "required": ["id"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "preview": { "type": "string" },
          "content": { "type": "string" },
          "path": { "type": "string" },
          "modifiedAt": { "type": "integer" },
          "size": { "type": "integer" }
        },
        "required": ["id", "title", "preview", "content", "path"],
        "additionalProperties": false
      }
    },
    {
      "id": "update-note",
      "name": "Update Note",
      "description": "Replace note content by id.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "content": { "type": "string" }
        },
        "required": ["id", "content"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "preview": { "type": "string" },
          "content": { "type": "string" },
          "path": { "type": "string" },
          "modifiedAt": { "type": "integer" },
          "size": { "type": "integer" }
        },
        "required": ["id", "title", "preview", "content", "path"],
        "additionalProperties": false
      }
    },
    {
      "id": "delete-note",
      "name": "Delete Note",
      "description": "Delete a note by id.",
      "risk_level": "Confirm",
      "input_schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" }
        },
        "required": ["id"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "deleted": { "type": "boolean" }
        }
      }
    },
    {
      "id": "search-notes",
      "name": "Search Notes",
      "description": "Search notes using the shared filesystem index over workspace notes/.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "includeHidden": { "type": "boolean", "default": false },
          "caseSensitive": { "type": "boolean", "default": false },
          "maxResults": { "type": "integer", "minimum": 1, "maximum": 200, "default": 20 },
          "maxDepth": { "type": "integer", "minimum": 0 }
        },
        "required": ["query"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "root": { "type": "string" },
          "notes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "preview": { "type": "string" },
                "path": { "type": "string" },
                "modifiedAt": { "type": "integer" },
                "size": { "type": "integer" }
              },
              "required": ["id", "title", "preview", "path"],
              "additionalProperties": false
            }
          },
          "count": { "type": "integer" },
          "truncated": { "type": "boolean" },
          "scanned": { "type": "integer" },
          "errors": { "type": "integer" },
          "indexState": { "type": "string" },
          "indexScannedFiles": { "type": "integer" },
          "indexScannedDirs": { "type": "integer" },
          "indexStartedAt": { "type": "integer" },
          "indexLastUpdateAt": { "type": "integer" },
          "indexFinishedAt": { "type": "integer" },
          "highlightTerms": { "type": "array", "items": { "type": "string" } }
        },
        "required": [
          "query",
          "root",
          "notes",
          "count",
          "truncated",
          "scanned",
          "errors",
          "indexState",
          "indexScannedFiles",
          "indexScannedDirs",
          "highlightTerms"
        ],
        "additionalProperties": false
      }
    },
    {
      "id": "index-status",
      "name": "Index Status",
      "description": "Inspect notes index status.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {},
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "state": { "type": "string" },
          "root": { "type": "string" },
          "ignoredPaths": { "type": "array", "items": { "type": "string" } },
          "indexedEntries": { "type": "integer" },
          "scannedFiles": { "type": "integer" },
          "scannedDirs": { "type": "integer" },
          "startedAt": { "type": "integer" },
          "lastUpdateAt": { "type": "integer" },
          "finishedAt": { "type": "integer" },
          "errors": { "type": "integer" },
          "watcherEnabled": { "type": "boolean" },
          "cachePath": { "type": "string" },
          "rescanCount": { "type": "integer" },
          "lastError": { "type": "string" }
        },
        "required": [
          "state",
          "root",
          "ignoredPaths",
          "indexedEntries",
          "scannedFiles",
          "scannedDirs",
          "errors",
          "watcherEnabled",
          "cachePath",
          "rescanCount"
        ],
        "additionalProperties": false
      }
    },
    {
      "id": "rescan-index",
      "name": "Rescan Index",
      "description": "Force a notes index rebuild.",
      "risk_level": "Safe",
      "input_schema": {
        "type": "object",
        "properties": {},
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "indexStatus": {
            "type": "object",
            "properties": {
              "state": { "type": "string" },
              "root": { "type": "string" },
              "ignoredPaths": { "type": "array", "items": { "type": "string" } },
              "indexedEntries": { "type": "integer" },
              "scannedFiles": { "type": "integer" },
              "scannedDirs": { "type": "integer" },
              "startedAt": { "type": "integer" },
              "lastUpdateAt": { "type": "integer" },
              "finishedAt": { "type": "integer" },
              "errors": { "type": "integer" },
              "watcherEnabled": { "type": "boolean" },
              "cachePath": { "type": "string" },
              "rescanCount": { "type": "integer" },
              "lastError": { "type": "string" }
            },
            "required": [
              "state",
              "root",
              "ignoredPaths",
              "indexedEntries",
              "scannedFiles",
              "scannedDirs",
              "errors",
              "watcherEnabled",
              "cachePath",
              "rescanCount"
            ],
            "additionalProperties": false
          }
        },
        "required": ["status", "indexStatus"],
        "additionalProperties": false
      }
    }
  ]
}
